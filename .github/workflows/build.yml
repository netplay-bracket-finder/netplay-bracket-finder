---
# adapted from:
# - https://github.com/marketplace/actions/install-nix#usage
name: "build netplay-bracket-finder crate"
on: workflow_dispatch
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@2541b1294d2704b0964813337f33b291d3f8596b # v3.0.2
    - uses: cachix/install-nix-action@5f45af07a1f451c75a4ce84e1514200195a1f279 # v15
      with:
        nix_path: nixpkgs=channel:nixos-unstable
    - name: build netplay-bracket-finder crate
      run: |
        cd rust
        nix-shell -p rustc cargo --run "cargo build --release"
    - name: upload artifact
      uses: actions/upload-artifact@3cea5372237819ed00197afe530f5a7ea3e805c8 # v3
      with:
        name: netplay-bracket-finder-x86_64-linux
        path: rust/target/release/netplay-bracket-finder
